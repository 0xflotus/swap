<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Swap : Exchange rates library for PHP 5.3+" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Swap</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/florianv/swap">View on GitHub</a>

          <h1 id="project_title">Swap</h1>
          <h2 id="project_tagline">Exchange rates library for PHP 5.3+</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/florianv/swap/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/florianv/swap/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="swap----" class="anchor" href="#swap----"><span class="octicon octicon-link"></span></a>Swap <a href="https://travis-ci.org/florianv/swap"><img src="https://travis-ci.org/florianv/swap.svg?branch=master" alt="Build status"></a> <a href="https://insight.sensiolabs.com/projects/825d1c3f-839b-47e6-969a-7ddefffe94b1"><img src="https://insight.sensiolabs.com/projects/825d1c3f-839b-47e6-969a-7ddefffe94b1/mini.png" alt="Insight"></a> <a href="https://packagist.org/packages/florianv/swap"><img src="http://img.shields.io/packagist/v/florianv/swap.svg" alt="Version"></a> <a href="https://packagist.org/packages/florianv/swap"><img src="http://img.shields.io/packagist/l/florianv/swap.svg" alt="License"></a>
</h1>

<p>Swap helps you to retrieve exchange rates from various providers. It leverages their ability to retrieve multiple quotes
at once, while simulating this behavior for those who don't support it by sending parallel HTTP requests.</p>

<blockquote>
<p>If you want to use this library with Symfony2, you can install <a href="https://github.com/florianv/FlorianvSwapBundle">FlorianvSwapBundle</a>.</p>
</blockquote>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Add this line to your <code>composer.json</code> file:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"require"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"florianv/swap"</span><span class="p">:</span> <span class="s2">"~1.0"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>First, you need to create a provider:</p>

<div class="highlight highlight-php"><pre><span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Guzzle\Http\Client</span><span class="p">();</span>
<span class="nv">$yahoo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Swap\Provider\YahooFinance</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
</pre></div>

<p>Then you can add it to Swap:</p>

<div class="highlight highlight-php"><pre><span class="nv">$swap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Swap\Swap</span><span class="p">();</span>
<span class="nv">$swap</span><span class="o">-&gt;</span><span class="na">addProvider</span><span class="p">(</span><span class="nv">$yahoo</span><span class="p">);</span>
</pre></div>

<p>Your job is to create a currency pair and Swap will set its rate:</p>

<div class="highlight highlight-php"><pre><span class="c1">// Create the currency pair EUR/USD</span>
<span class="nv">$pair</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Swap\Model\CurrencyPair</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">,</span> <span class="s1">'USD'</span><span class="p">);</span>

<span class="c1">// Quotes the pair</span>
<span class="nv">$swap</span><span class="o">-&gt;</span><span class="na">quote</span><span class="p">(</span><span class="nv">$pair</span><span class="p">);</span>

<span class="c1">// 1.3751</span>
<span class="k">echo</span> <span class="nv">$pair</span><span class="o">-&gt;</span><span class="na">getRate</span><span class="p">();</span>
</pre></div>

<p>We created a currency pair <code>EUR/USD</code>, quoted it with the <code>YahooFinance</code> provider and got <code>1.3751</code> as rate
which means that <code>1 EUR</code> is exchanged for <code>1.3751 USD</code>.</p>

<blockquote>
<p>Currencies are expressed as their <a href="http://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> code.</p>
</blockquote>

<h3>
<a name="multiple-pairs" class="anchor" href="#multiple-pairs"><span class="octicon octicon-link"></span></a>Multiple pairs</h3>

<p>You can also quote multiple pairs at once:</p>

<div class="highlight highlight-php"><pre><span class="k">use</span> <span class="nx">Swap\Model\CurrencyPair</span><span class="p">;</span>

<span class="nv">$eurUsd</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CurrencyPair</span><span class="p">(</span><span class="s1">'EUR'</span><span class="p">,</span> <span class="s1">'USD'</span><span class="p">);</span>
<span class="nv">$usdGbp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CurrencyPair</span><span class="p">(</span><span class="s1">'USD'</span><span class="p">,</span> <span class="s1">'GBP'</span><span class="p">);</span>
<span class="nv">$gbpJpy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CurrencyPair</span><span class="p">(</span><span class="s1">'GBP'</span><span class="p">,</span> <span class="s1">'JPY'</span><span class="p">);</span>

<span class="nv">$swap</span><span class="o">-&gt;</span><span class="na">quote</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$eurUsd</span><span class="p">,</span> <span class="nv">$usdGbp</span><span class="p">,</span> <span class="nv">$gbpJpy</span><span class="p">));</span>

<span class="c1">// 1.3751</span>
<span class="k">echo</span> <span class="nv">$eurUsd</span><span class="o">-&gt;</span><span class="na">getRate</span><span class="p">();</span>

<span class="c1">// 0.5938</span>
<span class="k">echo</span> <span class="nv">$usdGbp</span><span class="o">-&gt;</span><span class="na">getRate</span><span class="p">();</span>

<span class="c1">// 171.5772</span>
<span class="k">echo</span> <span class="nv">$gbpJpy</span><span class="o">-&gt;</span><span class="na">getRate</span><span class="p">();</span>
</pre></div>

<h3>
<a name="date" class="anchor" href="#date"><span class="octicon octicon-link"></span></a>Date</h3>

<p>You can also retrieve the date at which the rate was calculated:</p>

<div class="highlight highlight-php"><pre><span class="c1">// $date is a \DateTime instance</span>
<span class="nv">$date</span> <span class="o">=</span> <span class="nv">$pair</span><span class="o">-&gt;</span><span class="na">getDate</span><span class="p">()</span>
</pre></div>

<h3>
<a name="chained-providers" class="anchor" href="#chained-providers"><span class="octicon octicon-link"></span></a>Chained providers</h3>

<p>Providers can be chained so when one of them fails, the next one can be used to quote the pairs
that were not processed.</p>

<div class="highlight highlight-php"><pre><span class="nv">$yahoo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Swap\Provider\YahooFinance</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
<span class="nv">$google</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Swap\Provider\GoogleFinance</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>

<span class="nv">$swap</span><span class="o">-&gt;</span><span class="na">addProvider</span><span class="p">(</span><span class="nv">$yahoo</span><span class="p">);</span>
<span class="nv">$swap</span><span class="o">-&gt;</span><span class="na">addProvider</span><span class="p">(</span><span class="nv">$google</span><span class="p">);</span>
</pre></div>

<h3>
<a name="exception-handling" class="anchor" href="#exception-handling"><span class="octicon octicon-link"></span></a>Exception Handling</h3>

<p>Swap throws different types of exceptions:</p>

<div class="highlight highlight-php"><pre><span class="k">try</span> <span class="p">{</span>
    <span class="nv">$swap</span><span class="o">-&gt;</span><span class="na">quote</span><span class="p">(</span><span class="nv">$pair</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Swap\Exception\QuotationException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Default exception when the quote operation failed</span>
    <span class="c1">// For example when the HTTP request failed</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Swap\Exception\UnsupportedBaseCurrencyException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Exception thrown when a currency is not supported as base by the provider</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Swap\Exception\UnsupportedCurrencyPairException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Exception thrown when the currency pair is not supported</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="providers" class="anchor" href="#providers"><span class="octicon octicon-link"></span></a>Providers</h2>

<ul>
<li>
<a href="http://www.ecb.europa.eu/home/html/index.en.html">European Central Bank</a>
Supports only EUR as base currency.</li>
<li>
<a href="http://www.google.com/finance">Google Finance</a>
Supports multiple currencies as base and quote currencies.</li>
<li>
<a href="https://openexchangerates.org">Open Exchange Rates</a>
Supports only USD as base currency for the free version and multiple ones for the enterprise version.</li>
<li>
<a href="https://www.xignite.com">Xignite</a>
You must have access to the <code>XigniteGlobalCurrencies</code> API.
Supports multiple currencies as base and quote currencies.</li>
<li>
<a href="https://finance.yahoo.com/">Yahoo Finance</a>
Supports multiple currencies as base and quote currencies.</li>
<li>
<a href="http://www.webservicex.net/ws/default.aspx">WebserviceX</a>
Supports multiple currencies as base and quote currencies.</li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p><a href="https://github.com/florianv/swap/blob/master/LICENSE">MIT</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Swap maintained by <a href="https://github.com/florianv">florianv</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
